<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Registro Clínico</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .form-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        input, textarea, select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        textarea {
            height: 100px;
            resize: vertical;
        }
        button {
            padding: 12px 24px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }
        button:hover {
            background: #45a049;
        }
        .range-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 12px;
        }
        .range-container {
            margin: 15px 0;
        }
        input[type="range"] {
            width: 100%;
        }
    </style>
</head>
<body>
    <h1>Sistema de Registro Clínico</h1>

    <form id="clinicalForm">
        <!-- Hábitos y Hobbies -->
        <div class="form-section">
            <h2>Hábitos y Hobbies</h2>
            <div class="form-group">
                <label>Tabaco:</label>
                <textarea id="tabaco" placeholder="Cantidad, años de fumador, etc"></textarea>
            </div>
            <div class="form-group">
                <label>Alcohol:</label>
                <textarea id="alcohol" placeholder="Bebedor frecuente o social"></textarea>
            </div>
            <div class="form-group">
                <label>Drogas:</label>
                <textarea id="drogas"></textarea>
            </div>
            <div class="form-group">
                <label>Hobbies o Deportes:</label>
                <textarea id="hobbies" placeholder="Que realiza, ha realizado o quiere realizar"></textarea>
            </div>
            <div class="form-group">
                <label>Hábitos Nutricionales:</label>
                <textarea id="habitosNutricionales" placeholder="Alimentación, N° de comidas, alimentos ultra procesados, suplementos, hidratación, café, etc"></textarea>
            </div>
            <div class="form-group">
                <label>Sueño y Calidad del Sueño:</label>
                <textarea id="sueno" placeholder="Calidad, número de horas, tiempo para conciliar, despertares nocturnos"></textarea>
            </div>
            <div class="form-group">
                <label>Estado Mental:</label>
                <textarea id="estadoMental" placeholder="Salud mental, estrés percibido, preguntas asociadas a depresión"></textarea>
            </div>
            <div class="form-group">
                <label>Dificultades en Actividades Diarias:</label>
                <textarea id="dificultadesAVD" placeholder="Dificultades en tareas diarias o aspectos a mejorar"></textarea>
            </div>
        </div>

        <!-- Hogar y Red de Apoyo -->
        <div class="form-section">
            <h2>Hogar y Red de Apoyo</h2>
            <div class="form-group">
                <label>Descripción del Hogar:</label>
                <textarea id="descripcionHogar"></textarea>
            </div>
            <div class="form-group">
                <label>Red de Apoyo:</label>
                <textarea id="redApoyo"></textarea>
            </div>
            <div class="form-group">
                <label>Factores Sociales Relevantes:</label>
                <textarea id="factoresSociales"></textarea>
            </div>
            <div class="form-group">
                <label>Participación Social / Restricción de Participación:</label>
                <textarea id="participacionSocial"></textarea>
            </div>
        </div>

        <!-- Antropometría -->
        <div class="form-section">
            <h2>Antropometría</h2>
            <div class="form-group">
                <label>Peso (kg):</label>
                <input type="number" id="peso" step="0.1">
            </div>
            <div class="form-group">
                <label>Talla (cm):</label>
                <input type="number" id="talla">
            </div>
            <div class="form-group">
                <label>Circunferencia de Cuello (cm):</label>
                <input type="number" id="circunferenciaCuello" step="0.1">
            </div>
            <div class="form-group">
                <label>Circunferencia de Brazos (cm):</label>
                <input type="number" id="circunferenciaBrazos" step="0.1">
            </div>
            <div class="form-group">
                <label>Circunferencia de Cintura (cm):</label>
                <input type="number" id="circunferenciaCintura" step="0.1">
            </div>
            <div class="form-group">
                <label>Circunferencia de Cadera (cm):</label>
                <input type="number" id="circunferenciaCadera" step="0.1">
            </div>
            <div class="form-group">
                <label>Circunferencia de Muslo (cm):</label>
                <input type="number" id="circunferenciaMuslo" step="0.1">
            </div>
            <div class="form-group">
                <label>Circunferencia de Pantorrilla (cm):</label>
                <input type="number" id="circunferenciaPantorrilla" step="0.1">
            </div>
        </div>

        <!-- Examen Físico -->
        <div class="form-section">
            <h2>Examen Físico</h2>
            <div class="form-group">
                <label>Observación:</label>
                <textarea id="observacion" placeholder="Marcha / posición del usuario / Postura en todos los planos"></textarea>
            </div>
            <div class="form-group">
                <label>Inspección:</label>
                <textarea id="inspeccion"></textarea>
            </div>
            <div class="form-group">
                <label>Palpación:</label>
                <textarea id="palpacion"></textarea>
            </div>
            <div class="form-group">
                <label>Evaluación de Rangos de Movimientos:</label>
                <textarea id="rangosMovimiento" placeholder="FUNCIONAL / AROM / PROM / ACCESORIOS - Resalte signo comparable"></textarea>
            </div>
            <div class="form-group">
                <label>Fuerza:</label>
                <textarea id="fuerza" placeholder="Global como ejercicios o analítica MRC/KENDALLS"></textarea>
            </div>
            <div class="form-group">
                <label>Evaluación Neurológica:</label>
                <textarea id="evaluacionNeurologica" placeholder="Dermatomas/Miotomas/Reflejo - ASIA VS NERVIO PERIFERICO"></textarea>
            </div>
            <div class="form-group">
                <label>Flexibilidad:</label>
                <textarea id="flexibilidad"></textarea>
            </div>
            <div class="form-group">
                <label>Test Ortopédicos:</label>
                <textarea id="testOrtopedicos"></textarea>
            </div>
            <div class="form-group">
                <label>Equilibrio y Riesgo de Caída:</label>
                <textarea id="equilibrio"></textarea>
            </div>
            <div class="form-group">
                <label>Test de Rendimiento Físico o Deportivo:</label>
                <textarea id="testRendimiento"></textarea>
            </div>
        </div>

        <button type="submit">Guardar Registro</button>
    </form>

    <script>
        // Configuración de Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyAuUnWj4tyzWEzluB__RqW7JKGNJnLsMrA",
            authDomain: "sistema-clinico-6d42e.firebaseapp.com",
            projectId: "sistema-clinico-6d42e",
            storageBucket: "sistema-clinico-6d42e.firebasestorage.app",
            messagingSenderId: "150606305292",
            appId: "1:150606305292:web:1234fe31e3f40acbf0f629"
        };

        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Manejar el envío del formulario
        document.getElementById('clinicalForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // Recoger datos del formulario
            const data = {
                // Hábitos y Hobbies
                tabaco: document.getElementById('tabaco').value,
                alcohol: document.getElementById('alcohol').value,
                drogas: document.getElementById('drogas').value,
                hobbies: document.getElementById('hobbies').value,
                habitosNutricionales: document.getElementById('habitosNutricionales').value,
                sueno: document.getElementById('sueno').value,
                estadoMental: document.getElementById('estadoMental').value,
                dificultadesAVD: document.getElementById('dificultadesAVD').value,

                // Hogar y Red de Apoyo
                descripcionHogar: document.getElementById('descripcionHogar').value,
                redApoyo: document.getElementById('redApoyo').value,
                factoresSociales: document.getElementById('factoresSociales').value,
                participacionSocial: document.getElementById('participacionSocial').value,

                // Antropometría
                peso: document.getElementById('peso').value,
                talla: document.getElementById('talla').value,
                circunferenciaCuello: document.getElementById('circunferenciaCuello').value,
                circunferenciaBrazos: document.getElementById('circunferenciaBrazos').value,
                circunferenciaCintura: document.getElementById('circunferenciaCintura').value,
                circunferenciaCadera: document.getElementById('circunferenciaCadera').value,
                circunferenciaMuslo: document.getElementById('circunferenciaMuslo').value,
                circunferenciaPantorrilla: document.getElementById('circunferenciaPantorrilla').value,

                // Examen Físico
                observacion: document.getElementById('observacion').value,
                inspeccion: document.getElementById('inspeccion').value,
                palpacion: document.getElementById('palpacion').value,
                rangosMovimiento: document.getElementById('rangosMovimiento').value,
                fuerza: document.getElementById('fuerza').value,
                evaluacionNeurologica: document.getElementById('evaluacionNeurologica').value,
                flexibilidad: document.getElementById('flexibilidad').value,
                testOrtopedicos: document.getElementById('testOrtopedicos').value,
                equilibrio: document.getElementById('equilibrio').value,
                testRendimiento: document.getElementById('testRendimiento').value,

                // Metadata
                fechaRegistro: new Date()
            };

            // Guardar en Firebase
            db.collection('pacientes').add(data)
                .then((docRef) => {
                    alert('Registro guardado exitosamente');
                    this.reset();
                })
                .catch((error) => {
                    console.error("Error al guardar: ", error);
                    alert('Error al guardar el registro');
                });
        });
    </script>
</body>
</html>
